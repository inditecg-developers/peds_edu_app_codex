{% extends "base.html" %}

{% block title %}Publisher Landing{% endblock %}
{% block header_title %}Campaign Publishing{% endblock %}

{% block content %}
<div class="card">
  <h2>Publisher Landing Page</h2>

  <p class="muted">
    Authenticated publisher:
    <strong>{{ publisher.username }}</strong>
    {% if publisher.sub %} ({{ publisher.sub }}){% endif %}
  </p>

  {% if campaign_id %}
    <p><strong>Campaign ID:</strong> {{ campaign_id }}</p>

    {% if campaign_meta %}
      <div class="card" style="margin-top: 16px;">
        <h2>Campaign details from Project1</h2>
        <p><strong>Number of doctors supported:</strong> {{ campaign_meta.num_doctors_supported }}</p>
        <p><strong>Name:</strong> {{ campaign_meta.name }}</p>
        <p><strong>Company name:</strong> {{ campaign_meta.company_name }}</p>
        <p><strong>Contact person:</strong> {{ campaign_meta.contact_person_name }}</p>
        <p><strong>Contact phone:</strong> {{ campaign_meta.contact_person_phone }}</p>
        <p><strong>Contact email:</strong> {{ campaign_meta.contact_person_email }}</p>
      </div>
    {% endif %}

  {% else %}
    <p class="muted">
      No campaign-id was provided in the link. You can still edit existing campaigns.
    </p>
  {% endif %}

  <div class="row two" style="margin-top: 16px;">
    <div>
      {% if campaign_id %}
        <a class="btn" href="{% url 'campaign_publisher:add_campaign_details' %}?campaign-id={{ campaign_id|urlencode }}">
          Add details for this campaign
        </a>
      {% else %}
        <button class="btn" disabled>Add details for this campaign</button>
      {% endif %}
    </div>

    <div>
      <a class="btn btn-secondary" href="{% url 'campaign_publisher:campaign_list' %}">
        Edit details for any other campaign
      </a>
    </div>
  </div>
</div>
{% endblock %}
